/* ============================================
   404 PAGE
   ============================================ */

/* Film grain */
.grain::before {
    content: '';
    position: absolute;
    inset: -50%;
    width: 200%;
    height: 200%;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)'/%3E%3C/svg%3E");
    animation: grain 0.4s steps(1) infinite;
    opacity: 0.055;
    pointer-events: none;
}

@keyframes grain {
    0%   { transform: translate(0, 0); }
    20%  { transform: translate(-3%, -2%); }
    40%  { transform: translate(2%, 3%); }
    60%  { transform: translate(-2%, 1%); }
    80%  { transform: translate(3%, -3%); }
    100% { transform: translate(-1%, 2%); }
}

/* Iris de caméra — ouverture depuis le centre */
@keyframes iris-open {
    from { clip-path: circle(0% at 50% 45%); opacity: 0; }
    12%  { opacity: 1; }
    to   { clip-path: circle(130% at 50% 45%); opacity: 1; }
}

.e404-content {
    animation: iris-open 900ms var(--ease-out-expo) 200ms both;
}

/* Glitch sur le "404" */
.glitch { position: relative; }

.glitch::before,
.glitch::after {
    content: attr(data-text);
    position: absolute;
    inset: 0;
    pointer-events: none;
}

.glitch::before {
    color: #DB1717;
    animation: glitch-a 7s ease-in-out infinite;
}

.glitch::after {
    color: #4FC3F7;
    animation: glitch-b 7s ease-in-out infinite;
}

@keyframes glitch-a {
    0%, 82%, 100% { clip-path: none; transform: none; opacity: 0; }
    83%  { clip-path: polygon(0 18%, 100% 18%, 100% 34%, 0 34%); transform: translate(-5px); opacity: 1; }
    85%  { clip-path: polygon(0 60%, 100% 60%, 100% 72%, 0 72%); transform: translate(5px); opacity: 1; }
    87%  { clip-path: none; opacity: 0; }
}

@keyframes glitch-b {
    0%, 84%, 100% { clip-path: none; transform: none; opacity: 0; }
    85%  { clip-path: polygon(0 44%, 100% 44%, 100% 58%, 0 58%); transform: translate(4px); opacity: 1; }
    87%  { clip-path: polygon(0 10%, 100% 10%, 100% 22%, 0 22%); transform: translate(-4px); opacity: 1; }
    89%  { clip-path: none; opacity: 0; }
}

/* Feedback tactile CTA */
.e404-cta {
    transition: transform 100ms var(--ease-out-expo), background-color 150ms ease;
}

.e404-cta:active { transform: scale(0.97); }

@media (hover: hover) and (pointer: fine) {
    .e404-cta:hover { background-color: #c41414; }
}

/* Accessibilité */
@media (prefers-reduced-motion: reduce) {
    .e404-content { animation: none; clip-path: none; opacity: 1; }
    .glitch::before, .glitch::after { animation: none; opacity: 0; }
    .grain::before { animation: none; }
    .e404-cta { transition: none; }
}
